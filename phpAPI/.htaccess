# Apache .htaccess for URL Rewriting
# Enables clean URLs for API endpoints

RewriteEngine On
RewriteBase /phpAPI/

# If file exists, serve it directly (don't rewrite)
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^ - [L]

# If directory exists, serve it directly (don't rewrite)
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# Route /api/products to backend/api/products/index.php
RewriteRule ^api/products/?$ backend/api/products/index.php [L,QSA]
RewriteRule ^api/products/([0-9]+)/?$ backend/api/products/index.php?id=$1 [L,QSA]

# Route /api/categories to backend/api/categories/index.php
RewriteRule ^api/categories/?$ backend/api/categories/index.php [L,QSA]
RewriteRule ^api/categories/([0-9]+)/?$ backend/api/categories/index.php?category_id=$1 [L,QSA]
RewriteRule ^api/categories/([0-9]+)/products/?$ backend/api/categories/index.php?category_id=$1&products=1 [L,QSA]

# Default route to frontend
RewriteRule ^$ frontend/index.html [L]
